<script>
  var availableSkills = [<%= Skill.all.reject{ |s| @user.skills.include?(s) }.collect{ |s| "\"#{escape_javascript(s.name)}\"" }.join(",") %>];
</script>
<script type="text/javascript" src="/javascripts/skills.js"></script>

<% @content_title = @user.name %>

<div class="skinny_left">
  <%= user_image @user, :gravatar_link => true %>
  <p>
    <%= link_to 'Edit Profile', edit_user_path(@user) %>
  </p>
</div>

<div class="wide_right">

  <div class="user_dets">
    <h3>
      Skills
      <%= link_to_function "add", "Element.toggle('new_skill')", :class => "action" %>
    </h3>
    <div id="skills_container">
      <script>

      </script>
      <%= render "/user_skills/skills", :user => @user %>
    </div>
  </div>

  <div class="user_dets">
    <h3>
      Availability
      <%= link_to "edit", edit_availability_user_path(@user), :class => "action" %>
    </h3>


    <p>
      <% if @user.available_to_mentor %>
        <%= link_to "Become #{@user.name}'s Apprentice", new_mentorship_path(:mentor_id => @user.id) %>
      <% else %>
        
      <% end %>
    </p>

    <p>
      <% if @user.available_to_be_mentored %>
        <%= link_to "Become #{@user.name}'s Mentor", new_mentorship_path(:mentee_id => @user.id) %>
      <% else %>
        
      <% end %>
    </p>
    
    <% if @user.available_to_mentor || @user.available_to_be_mentored %>

    <p>
      <b>Remote availability:</b>
      <%=h @user.derived_remote_availability %>
    </p>

    <p>
      <b>Local availability:</b>
      <%=h @user.derived_local_availability %>
    </p>

    <% end %>    
  </div>

</div>